---
import { getCollection, render } from "astro:content";
import { type CollectionEntry } from "astro:content";
import "../styles/global.css";
import { Breadcrumbs } from "../components/breadcrumbs";
import BaseLayout from "../layouts/BaseLayout.astro";

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));
}

type Props = CollectionEntry<"blog">;

const post = Astro.props;
const { Content } = await render(post);
---

<BaseLayout title={post.data.title} description={post.data.description}>
  <div>
    <Breadcrumbs
      paths={[
        { label: "colecciÃ³n", href: "/" },
        {
          label: post.data.title,
          href: `/${post.id}`,
          disabled: true,
        },
      ]}
    />
  </div>
  <div class="text-primary-200 mb-4">
    <p>{post.data.description}</p>
    <time
      >{
        post.data.pubDate.toLocaleDateString("es-ES", {
          month: "numeric",
          year: "numeric",
        })
      }</time
    >
  </div>

  <article class="prose prose-lg max-w-none space-y-8">
    <Content />
  </article>
</BaseLayout>
